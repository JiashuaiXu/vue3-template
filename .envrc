# .envrc file for automatic Nix development environment loading with direnv

# Use use_nix if available
if [[ $(type -t use_nix) == "function" ]]; then
  use_nix
else
  # Fallback: load nix develop environment manually
  if command -v nix >/dev/null 2>&1; then
    watch_file flake.nix
    watch_file flake.lock
    
    # Source the nix environment
    source <(nix print-dev-env --profile .# 2>/dev/null || nix print-dev-env 2>/dev/null)
  fi
fi